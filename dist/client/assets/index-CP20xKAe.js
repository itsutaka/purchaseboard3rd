const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PurchaseRequestBoard-C1kJdLSt.js","assets/vendor-BIkbSswl.js"])))=>i.map(i=>d[i]);
import{i as P,g as C,a as S,b as A,r as u,o as I,j as e,s as z,G as O,c as k,d as G,X as R,L as v,U,e as q,R as w,f as B}from"./vendor-BIkbSswl.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&g(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function g(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const F="modulepreload",M=function(d){return"/"+d},j={},_=function(n,o,g){let t=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));t=Promise.allSettled(o.map(i=>{if(i=M(i),i in j)return;j[i]=!0;const l=i.endsWith(".css"),m=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":F,l||(c.as="script"),c.crossOrigin="",c.href=i,a&&c.setAttribute("nonce",a),document.head.appendChild(c),l)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return t.then(s=>{for(const a of s||[])a.status==="rejected"&&r(a.reason);return n().catch(r)})};let N;N={apiKey:"AIzaSyALS2VZcCRA8u7az9ZVNGFCtkLPvHjlERI",authDomain:"bqgracechurch.firebaseapp.com",projectId:"bqgracechurch",storageBucket:"bqgracechurch.firebasestorage.app",messagingSenderId:"751512628182",appId:"1:751512628182:web:a52e95290e5b8217821277"};const b=P(N),f=C(b),X=S(b);A(b);const L=u.createContext(),y=()=>u.useContext(L),W=({children:d})=>{const[n,o]=u.useState(null),[g,t]=u.useState(!0),r=(l,m)=>G(f,l,m),s=()=>{const l=new O;return k(f,l)},a=()=>z(f);u.useEffect(()=>I(f,m=>{o(m),t(!1)}),[]);const i={currentUser:n,login:r,signInWithGoogle:s,logout:a};return e.jsx(L.Provider,{value:i,children:!g&&d})},D=()=>e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),e.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),e.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),e.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),e.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),H=({isOpen:d,onClose:n})=>{const{login:o,signInWithGoogle:g}=y(),[t,r]=u.useState(""),[s,a]=u.useState(""),[i,l]=u.useState(""),[m,c]=u.useState(!1),h=async()=>{l(""),c(!0);try{await g(),n()}catch(x){console.error("Google Login failed:",x),l("Google 登入失敗，請稍後再試。")}finally{c(!1)}},p=async x=>{x.preventDefault(),l(""),c(!0);try{await o(t,s),n()}catch(E){console.error("Login failed:",E),l("登入失敗，請檢查帳號密碼或模擬器中是否有此用戶。")}finally{c(!1)}};return d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-blue-500 text-white p-4 rounded-t-lg flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"登入"}),e.jsx("button",{onClick:n,className:"text-white hover:bg-blue-600 p-1 rounded-full transition-colors",children:e.jsx(R,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[i&&e.jsx("p",{className:"text-red-500 text-sm bg-red-100 p-3 rounded-md text-center mb-4",children:i}),e.jsxs("button",{onClick:h,disabled:m,className:"w-full border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-3 transition-colors disabled:opacity-50",children:[e.jsx(D,{}),"使用 Google 帳號登入"]}),e.jsxs("div",{className:"my-4 flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-gray-300"}),e.jsx("span",{className:"flex-shrink mx-4 text-gray-400 text-sm",children:"或"}),e.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:x=>r(x.target.value),placeholder:"test@example.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:x=>a(x.target.value),placeholder:"123456",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{type:"submit",disabled:m,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50",children:m?"登入中...":e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16})," 登入"]})})]})]})]})]})}):null},V=()=>{const{currentUser:d,logout:n}=y(),o=async()=>{try{await n()}catch(g){console.error("Logout failed:",g),alert("登出時發生錯誤。")}};return d?e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm mb-4 flex justify-between items-center text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-medium",children:[e.jsx(U,{size:18}),e.jsxs("span",{children:["已登入：",d.email]})]}),e.jsxs("button",{onClick:o,className:"bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-3 rounded-md flex items-center gap-1 transition-colors",children:[e.jsx(q,{size:16}),"登出"]})]}):null},$=w.lazy(()=>_(()=>import("./PurchaseRequestBoard-C1kJdLSt.js"),__vite__mapDeps([0,1]))),K=()=>e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-xl text-gray-600",children:"正在載入採購看板..."})});function T(){const{currentUser:d}=y(),[n,o]=u.useState(!1);return e.jsx("div",{className:"bg-gray-100 min-h-screen p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Purchase Board App (Dev Mode)"}),!d&&e.jsxs("button",{onClick:()=>o(!0),className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(v,{size:18}),"登入"]})]}),e.jsx(V,{}),e.jsx(u.Suspense,{fallback:e.jsx(K,{}),children:e.jsx($,{})}),e.jsx(H,{isOpen:n,onClose:()=>o(!1)})]})})}B.createRoot(document.getElementById("root")).render(e.jsx(w.StrictMode,{children:e.jsx(W,{children:e.jsx(T,{})})}));export{X as f,y as u};
